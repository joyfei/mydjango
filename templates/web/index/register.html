{% extends 'web/basic.html' %}
{% load static %}

{% block title %} 用户注册 {% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'web/css/account.css' %}">
{% endblock %}


{% block content %}
    <div class="account">
    <div class="title">用户注册</div>
        <form id = "form" method="post" novalidate>
            {% csrf_token %}
            {% for field in form %}
                {% if field.name == 'code' %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                        <div class="clearfix">
                            <div class="col-md-6">{{ field }}</div>
                            <div class="col-md-6"><input type="button" id="btnsms" class="btn btn-default" href="{% url 'web_send_sms' %}" value="点击获取验证码"></div>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                        {{ field }}
                    </div>
                {% endif %}
            {% endfor %}

              <div class="row">
                <div class="col-xs-8">
                  <div class="checkbox icheck">
                    <label>
                      <input type="checkbox"> 我同意 <a href="#">条约</a>
                    </label>
                  </div>
                </div>
                    <!-- /.col -->
                    <div class="col-xs-4">
                      <button type="submit"  class="btn btn-primary btn-block btn-flat">注册</button>
                    </div>
              </div>
        </form>
    </div>


{% endblock %}


{% block js %}
    <script>
        //页面框架加载完成之后自动执行函数
        $(function (){
            bindclickbtnsms();
        });
        /*
        点击获取验证码的按钮绑定事件
        * */
        function bindclickbtnsms(){
            $('#btnsms').click(function (){
                //获取用户输入的手机号
                //找到输入框的ID，根据ID获取值
                {#alert($('#id_mobile_phone').val());#}
                var mobilePhone =$('#id_mobile_phone').val()
                //发送ajax请求，把手机号发送过去
                $.ajax({
                    url:"{% url 'web_send_sms' %}",//要提交的地址
                    type:"GET",
                    data:{mobile_phone: mobilePhone ,tpl: "register"},
                    success:function (res){
                        //ajax请求发送成功之后，自动执行的函数；res就是后端返回的值
                        console.log(res);
                    }
                })
            })
        }

    </script>
{% endblock %}

